import { BellFilled, MailOutlined } from "@ant-design/icons";
import { Badge, Drawer, Image, List, Space, Typography } from "antd";
import { useEffect, useState } from "react";
import { getComments, getOrders } from "../../API";

function AppHeader() {
  const [comments, setComments] = useState([]);
  const [orders, setOrders] = useState([]);
  const [commentsOpen, setCommentsOpen] = useState(false);
  const [notificationsOpen, setNotificationsOpen] = useState(false);

  useEffect(() => {
    getComments().then((res) => {
      setComments(res.comments);
    });
    getOrders().then((res) => {
      setOrders(res.products);
    });
  }, []);

  return (
    <div className="AppHeader">
      <Image
        width={120}
        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjM2IiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDIzNiAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMzYiIGhlaWdodD0iMTAwIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIwLjI2NjY2NyIvPgo8cGF0aCBkPSJNOTguNjI1IDU3LjkyOTdWMzguNjQwNkgxMDUuMzc1VjY0SDk5LjAyMzRMOTguNjI1IDU3LjkyOTdaTTk5LjM3NSA1Mi43MjY2TDEwMS4zNjcgNTIuNjc5N0MxMDEuMzY3IDU0LjM2NzIgMTAxLjE3MiA1NS45Mzc1IDEwMC43ODEgNTcuMzkwNkMxMDAuMzkxIDU4LjgyODEgOTkuODA0NyA2MC4wNzgxIDk5LjAyMzQgNjEuMTQwNkM5OC4yNDIyIDYyLjE4NzUgOTcuMjU3OCA2My4wMDc4IDk2LjA3MDMgNjMuNjAxNkM5NC44ODI4IDY0LjE3OTcgOTMuNDg0NCA2NC40Njg4IDkxLjg3NSA2NC40Njg4QzkwLjY0MDYgNjQuNDY4OCA4OS41IDY0LjI5NjkgODguNDUzMSA2My45NTMxQzg3LjQyMTkgNjMuNTkzOCA4Ni41MzEyIDYzLjAzOTEgODUuNzgxMiA2Mi4yODkxQzg1LjA0NjkgNjEuNTIzNCA4NC40Njg4IDYwLjU0NjkgODQuMDQ2OSA1OS4zNTk0QzgzLjY0MDYgNTguMTU2MiA4My40Mzc1IDU2LjcxMDkgODMuNDM3NSA1NS4wMjM0VjM4LjY0MDZIOTAuMTg3NVY1NS4wNzAzQzkwLjE4NzUgNTUuODIwMyA5MC4yNzM0IDU2LjQ1MzEgOTAuNDQ1MyA1Ni45Njg4QzkwLjYzMjggNTcuNDg0NCA5MC44OTA2IDU3LjkwNjIgOTEuMjE4OCA1OC4yMzQ0QzkxLjU0NjkgNTguNTYyNSA5MS45Mjk3IDU4Ljc5NjkgOTIuMzY3MiA1OC45Mzc1QzkyLjgyMDMgNTkuMDc4MSA5My4zMjAzIDU5LjE0ODQgOTMuODY3MiA1OS4xNDg0Qzk1LjI1NzggNTkuMTQ4NCA5Ni4zNTE2IDU4Ljg2NzIgOTcuMTQ4NCA1OC4zMDQ3Qzk3Ljk2MDkgNTcuNzQyMiA5OC41MzEyIDU2Ljk3NjYgOTguODU5NCA1Ni4wMDc4Qzk5LjIwMzEgNTUuMDIzNCA5OS4zNzUgNTMuOTI5NyA5OS4zNzUgNTIuNzI2NlpNMTE3LjY1NiAzOC42NDA2VjY0SDExMC44ODNWMzguNjQwNkgxMTcuNjU2Wk0xMTAuNDYxIDMyLjAzMTJDMTEwLjQ2MSAzMS4wNDY5IDExMC44MDUgMzAuMjM0NCAxMTEuNDkyIDI5LjU5MzhDMTEyLjE4IDI4Ljk1MzEgMTEzLjEwMiAyOC42MzI4IDExNC4yNTggMjguNjMyOEMxMTUuMzk4IDI4LjYzMjggMTE2LjMxMiAyOC45NTMxIDExNyAyOS41OTM4QzExNy43MDMgMzAuMjM0NCAxMTguMDU1IDMxLjA0NjkgMTE4LjA1NSAzMi4wMzEyQzExOC4wNTUgMzMuMDE1NiAxMTcuNzAzIDMzLjgyODEgMTE3IDM0LjQ2ODhDMTE2LjMxMiAzNS4xMDk0IDExNS4zOTggMzUuNDI5NyAxMTQuMjU4IDM1LjQyOTdDMTEzLjEwMiAzNS40Mjk3IDExMi4xOCAzNS4xMDk0IDExMS40OTIgMzQuNDY4OEMxMTAuODA1IDMzLjgyODEgMTEwLjQ2MSAzMy4wMTU2IDExMC40NjEgMzIuMDMxMlpNMTI5Ljk4NCAyNy45NzY2VjY0SDEyMy4yMzRWMjcuOTc2NkgxMjkuOTg0Wk0xNDUuOTY5IDM4LjY0MDZMMTM0Ljk1MyA1MS4yMDMxTDEyOS4wNDcgNTcuMTc5N0wxMjYuNTg2IDUyLjMwNDdMMTMxLjI3MyA0Ni4zNTE2TDEzNy44NTkgMzguNjQwNkgxNDUuOTY5Wk0xMzguOTYxIDY0TDEzMS40NjEgNTIuMjgxMkwxMzYuMTI1IDQ4LjIwMzFMMTQ2Ljc0MiA2NEgxMzguOTYxWk0xNjIuNjU2IDQ5LjAyMzRIMTUzLjg5MUwxNTMuODQ0IDQ0LjE5NTNIMTYxLjIwM0MxNjIuNSA0NC4xOTUzIDE2My41NjIgNDQuMDMxMiAxNjQuMzkxIDQzLjcwMzFDMTY1LjIxOSA0My4zNTk0IDE2NS44MzYgNDIuODY3MiAxNjYuMjQyIDQyLjIyNjZDMTY2LjY2NCA0MS41NzAzIDE2Ni44NzUgNDAuNzczNCAxNjYuODc1IDM5LjgzNTlDMTY2Ljg3NSAzOC43NzM0IDE2Ni42NzIgMzcuOTE0MSAxNjYuMjY2IDM3LjI1NzhDMTY1Ljg3NSAzNi42MDE2IDE2NS4yNTggMzYuMTI1IDE2NC40MTQgMzUuODI4MUMxNjMuNTg2IDM1LjUzMTIgMTYyLjUxNiAzNS4zODI4IDE2MS4yMDMgMzUuMzgyOEgxNTYuMzI4VjY0SDE0OS4yOTdWMjkuODc1SDE2MS4yMDNDMTYzLjE4OCAyOS44NzUgMTY0Ljk2MSAzMC4wNjI1IDE2Ni41MjMgMzAuNDM3NUMxNjguMTAyIDMwLjgxMjUgMTY5LjQzOCAzMS4zODI4IDE3MC41MzEgMzIuMTQ4NEMxNzEuNjI1IDMyLjkxNDEgMTcyLjQ2MSAzMy44ODI4IDE3My4wMzkgMzUuMDU0N0MxNzMuNjE3IDM2LjIxMDkgMTczLjkwNiAzNy41ODU5IDE3My45MDYgMzkuMTc5N0MxNzMuOTA2IDQwLjU4NTkgMTczLjU4NiA0MS44ODI4IDE3Mi45NDUgNDMuMDcwM0MxNzIuMzIgNDQuMjU3OCAxNzEuMzI4IDQ1LjIyNjYgMTY5Ljk2OSA0NS45NzY2QzE2OC42MjUgNDYuNzI2NiAxNjYuODY3IDQ3LjE0MDYgMTY0LjY5NSA0Ny4yMTg4TDE2Mi42NTYgNDkuMDIzNFpNMTYyLjM1MiA2NEgxNTEuOTY5TDE1NC43MTEgNTguNTE1NkgxNjIuMzUyQzE2My41ODYgNTguNTE1NiAxNjQuNTk0IDU4LjMyMDMgMTY1LjM3NSA1Ny45Mjk3QzE2Ni4xNTYgNTcuNTIzNCAxNjYuNzM0IDU2Ljk3NjYgMTY3LjEwOSA1Ni4yODkxQzE2Ny40ODQgNTUuNjAxNiAxNjcuNjcyIDU0LjgxMjUgMTY3LjY3MiA1My45MjE5QzE2Ny42NzIgNTIuOTIxOSAxNjcuNSA1Mi4wNTQ3IDE2Ny4xNTYgNTEuMzIwM0MxNjYuODI4IDUwLjU4NTkgMTY2LjI5NyA1MC4wMjM0IDE2NS41NjIgNDkuNjMyOEMxNjQuODI4IDQ5LjIyNjYgMTYzLjg1OSA0OS4wMjM0IDE2Mi42NTYgNDkuMDIzNEgxNTUuODgzTDE1NS45MyA0NC4xOTUzSDE2NC4zNjdMMTY1Ljk4NCA0Ni4wOTM4QzE2OC4wNjIgNDYuMDYyNSAxNjkuNzM0IDQ2LjQyOTcgMTcxIDQ3LjE5NTNDMTcyLjI4MSA0Ny45NDUzIDE3My4yMTEgNDguOTIxOSAxNzMuNzg5IDUwLjEyNUMxNzQuMzgzIDUxLjMyODEgMTc0LjY4IDUyLjYxNzIgMTc0LjY4IDUzLjk5MjJDMTc0LjY4IDU2LjE3OTcgMTc0LjIwMyA1OC4wMjM0IDE3My4yNSA1OS41MjM0QzE3Mi4yOTcgNjEuMDA3OCAxNzAuODk4IDYyLjEyNSAxNjkuMDU1IDYyLjg3NUMxNjcuMjI3IDYzLjYyNSAxNjQuOTkyIDY0IDE2Mi4zNTIgNjRaTTE4Ni42NTYgMzguNjQwNlY2NEgxNzkuODgzVjM4LjY0MDZIMTg2LjY1NlpNMTc5LjQ2MSAzMi4wMzEyQzE3OS40NjEgMzEuMDQ2OSAxNzkuODA1IDMwLjIzNDQgMTgwLjQ5MiAyOS41OTM4QzE4MS4xOCAyOC45NTMxIDE4Mi4xMDIgMjguNjMyOCAxODMuMjU4IDI4LjYzMjhDMTg0LjM5OCAyOC42MzI4IDE4NS4zMTIgMjguOTUzMSAxODYgMjkuNTkzOEMxODYuNzAzIDMwLjIzNDQgMTg3LjA1NSAzMS4wNDY5IDE4Ny4wNTUgMzIuMDMxMkMxODcuMDU1IDMzLjAxNTYgMTg2LjcwMyAzMy44MjgxIDE4NiAzNC40Njg4QzE4NS4zMTIgMzUuMTA5NCAxODQuMzk4IDM1LjQyOTcgMTgzLjI1OCAzNS40Mjk3QzE4Mi4xMDIgMzUuNDI5NyAxODEuMTggMzUuMTA5NCAxODAuNDkyIDM0LjQ2ODhDMTc5LjgwNSAzMy44MjgxIDE3OS40NjEgMzMuMDE1NiAxNzkuNDYxIDMyLjAzMTJaTTE5OS4zNTkgMjhWNjRIMTkyLjU4NlYyOEgxOTkuMzU5Wk0yMTIuMDYyIDI4VjY0SDIwNS4yODlWMjhIMjEyLjA2MloiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik03My45OTYgNTQuMTk5NUM3Ny40MzE5IDU0Ljk2NzUgODAuOTA3MiA1Mi43OTI0IDgwLjk5MDggNDkuMjcyN0M4MS4xMDUgNDQuNDcyNiA4MC4xNTQ1IDM5LjY3OTEgNzguMTc1IDM1LjI0NjhDNzUuMzIzNCAyOC44NjIgNzAuNDg4NiAyMy41NjcxIDY0LjM4ODUgMjAuMTQ4NUM1OC4yODg0IDE2LjczIDUxLjI0ODQgMTUuMzcwMSA0NC4zMTQgMTYuMjcwN0MzNy4zNzk2IDE3LjE3MTQgMzAuOTIwNiAyMC4yODQ2IDI1Ljg5NjIgMjUuMTQ4QzIwLjg3MTggMzAuMDExNCAxNy41NSAzNi4zNjU3IDE2LjQyNCA0My4yNjcxQzE1LjI5ODEgNTAuMTY4NSAxNi40MjgyIDU3LjI0OTEgMTkuNjQ2NCA2My40NTcyQzIyLjg2NDUgNjkuNjY1MyAyNy45OTkyIDc0LjY2OTkgMzQuMjg3OCA3Ny43Mjc4QzM4LjY1MzQgNzkuODUwNiA0My40MTMzIDgwLjk1NjYgNDguMjE0NyA4MC45OTg4QzUxLjczNTIgODEuMDI5NyA1NC4wMjIzIDc3LjYyNzEgNTMuMzY2NSA3NC4xNjhWNzQuMTY4QzUyLjcxMDcgNzAuNzA5IDQ5LjMyMjUgNjguNTQ1MSA0NS44MzQgNjguMDY5OEM0My43NzM2IDY3Ljc4OTEgNDEuNzU3MyA2Ny4xODMxIDM5Ljg2MzEgNjYuMjYyQzM2LjA0MTUgNjQuNDAzNyAzMi45MjExIDYxLjM2MjQgMzAuOTY1MyA1Ny41ODk2QzI5LjAwOTYgNTMuODE2OSAyOC4zMjI5IDQ5LjUxNCAyOS4wMDcxIDQ1LjMxOTlDMjkuNjkxMyA0MS4xMjU4IDMxLjcxIDM3LjI2NDMgMzQuNzYzNCAzNC4zMDg3QzM3LjgxNjggMzEuMzUzMiA0MS43NDIgMjkuNDYxMyA0NS45NTYxIDI4LjkxMzlDNTAuMTcwMyAyOC4zNjY2IDU0LjQ0ODUgMjkuMTkzIDU4LjE1NTYgMzEuMjcwNUM2MS44NjI3IDMzLjM0OCA2NC44MDA5IDM2LjU2NTggNjYuNTMzOCA0MC40NDU5QzY3LjM5MjcgNDIuMzY5IDY3LjkzMjggNDQuNDA0IDY4LjE0NjIgNDYuNDcyNUM2OC41MDc3IDQ5Ljk3NDUgNzAuNTYwMiA1My40MzE0IDczLjk5NiA1NC4xOTk1VjU0LjE5OTVaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMTdfMjgpIi8+CjxwYXRoIGQ9Ik00NyA0N0w3NCA3NSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMTdfMjgiIHgxPSI0OSIgeTE9IjE2IiB4Mj0iNDkiIHkyPSIxMDYuNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMDU2MERGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzA4MTkzMCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo="
      ></Image>
      <Typography.Title>Dashboard</Typography.Title>
      <Space>
        <Badge count={comments.length} dot>
          <MailOutlined
            style={{ fontSize: 24 }}
            onClick={() => {
              setCommentsOpen(true);
            }}
          />
        </Badge>
        <Badge count={orders.length}>
          <BellFilled
            style={{ fontSize: 24 }}
            onClick={() => {
              setNotificationsOpen(true);
            }}
          />
        </Badge>
      </Space>
      <Drawer
        title="Comments"
        open={commentsOpen}
        onClose={() => {
          setCommentsOpen(false);
        }}
        maskClosable
      >
        <List
          dataSource={comments}
          renderItem={(item) => {
            return <List.Item>{item.body}</List.Item>;
          }}
        ></List>
      </Drawer>
      <Drawer
        title="Notifications"
        open={notificationsOpen}
        onClose={() => {
          setNotificationsOpen(false);
        }}
        maskClosable
      >
        <List
          dataSource={orders}
          renderItem={(item) => {
            return (
              <List.Item>
                <Typography.Text strong>{item.title}</Typography.Text> has been
                ordered!
              </List.Item>
            );
          }}
        ></List>
      </Drawer>
    </div>
  );
}
export default AppHeader;